---
meta:
  version: "0.1"
breeder:
  name: "linux_network_stack_breeder"
  settings:
    sysctl:
      net.ipv4.tcp_mem:
        constraints:
          lower: 188760
          upper: 377520
          net.ipv4.tcp_rmem:
            constraints:
              lower: 4096
              upper: 6291456
          net.ipv4.tcp_wmem:
            constraints:
              lower: 4096
              upper: 6291456
  run:
    parallel: 1
    iterations:
      min: 10
      max: 1000
    timing:
      # start: 1m
      end: 10d
      interval: 60
  recon:
    prometheus:
      - name: "tcp_rtt"
        query: "quantile(0.5, tcp_rtt)" # median
      - name: "tcp_delivery_rate_bytes"
        query: "quantile(0.5, tcp_delivery_rate_bytes)" # median
  effectuation:
    user: godon_robot
    target: "10.0.5.53"
    key_file: "/opt/airflow/credentials/id_rsa"
